<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />
  <title>リングネームメーカー</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:rgba(255,255,255,.08);
      --panel2:rgba(255,255,255,.12);
      --line:rgba(255,255,255,.14);
      --ink:#f3f6ff;
      --muted:rgba(243,246,255,.72);
      --accent:#60a5fa;
      --good:#34d399;
      --shadow:0 18px 60px rgba(0,0,0,.55);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:radial-gradient(1200px 800px at 20% 10%, rgba(96,165,250,.18), transparent 55%),
                 radial-gradient(900px 700px at 85% 20%, rgba(52,211,153,.12), transparent 55%),
                 var(--bg);
      color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "Segoe UI", sans-serif;
      overflow:hidden;
    }
    .wrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .card{
      width:min(720px, 100%);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--line);
      border-radius:24px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    header{
      padding:18px 18px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .ttl{
      display:flex; flex-direction:column; gap:2px;
    }
    h1{font-size:18px; margin:0; letter-spacing:.06em}
    .sub{font-size:12px; color:var(--muted)}
    .badge{
      font-size:12px;
      color:rgba(255,255,255,.88);
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      white-space:nowrap;
    }
    main{padding:18px}
    .row{display:flex; gap:12px; flex-wrap:wrap}
    .field{
      flex:1 1 260px;
      display:flex; gap:10px; align-items:center;
      padding:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.16);
    }
    input{
      flex:1;
      background:transparent;
      border:none;
      outline:none;
      color:var(--ink);
      font-size:16px;
      padding:6px 2px;
      min-width:160px;
    }
    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    button{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius:16px;
      background:var(--panel2);
      border:1px solid var(--line);
      color:var(--ink);
      font-weight:700;
      letter-spacing:.02em;
      transition:transform .06s ease, background .12s ease;
      user-select:none;
      touch-action:manipulation;
    }
    button:active{transform:translateY(1px) scale(.99)}
    .primary{
      background:linear-gradient(180deg, rgba(96,165,250,.35), rgba(96,165,250,.18));
      border-color:rgba(96,165,250,.45);
    }
    .ghost{
      background:rgba(0,0,0,.14);
    }
    .out{
      margin-top:16px;
      border-radius:20px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      overflow:hidden;
    }
    .outHead{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .outHead .label{font-size:12px; color:var(--muted)}
    .outBody{padding:16px}
    .big{
      font-size:22px;
      margin:2px 0 10px;
      letter-spacing:.04em;
      line-height:1.2;
    }
    .kv{
      display:grid;
      grid-template-columns: 120px 1fr;
      gap:10px 12px;
      align-items:start;
      padding:12px;
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(255,255,255,.05);
    }
    .k{color:var(--muted); font-size:12px; padding-top:2px}
    .v{font-size:14px; line-height:1.45}
    .note{
      margin-top:12px;
      font-size:12px;
      color:var(--muted);
    }
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.35);
      color:rgba(255,255,255,.92);
      font-size:12px;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-2px);
    }
    .mini{
      font-size:12px;
      color:rgba(255,255,255,.9);
      display:flex; gap:8px; align-items:center;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background:var(--good);
      box-shadow:0 0 0 6px rgba(52,211,153,.12);
    }
    @media (max-width:480px){
      main{padding:14px}
      .big{font-size:20px}
      .kv{grid-template-columns: 92px 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="application" aria-label="リングネームメーカー">
      <header>
        <div class="ttl">
          <h1>リングネームメーカー</h1>
          <div class="sub">名前を入れてレスラーを生成しよう！</div>
        </div>
        <div class="badge" id="seedBadge">seed: -</div>
      </header>

      <main>
        <div class="row">
          <div class="field">
            <span class="mini"><span class="dot"></span>入力</span>
            <input id="nameInput" type="text" inputmode="text" autocomplete="off" placeholder="例：松村 / Matsumura / たろう" maxlength="24" />
          </div>
        </div>

        <div class="btns">
          <button class="primary" id="genBtn">生成</button>
          <button class="ghost" id="shuffleBtn">同名で別案</button>
          <button class="ghost" id="copyBtn">コピー</button>
          <button class="ghost" id="shareBtn">共有</button>
          <button class="ghost" id="resetBtn">リセット</button>
        </div>

        <section class="out" aria-live="polite">
          <div class="outHead">
            <div>
              <div class="label">あなたのリングプロフィール</div>
              <div class="sub" id="stamp">—</div>
            </div>
            <div class="badge" id="versionBadge">ver 2026.02.19</div>
          </div>
          <div class="outBody">
            <div class="big" id="ringName">—</div>
            <div class="kv">
              <div class="k">キャッチ</div><div class="v" id="catch">—</div>
              <div class="k">得意技</div><div class="v" id="finisher">—</div>
              <div class="k">属性</div><div class="v" id="style">—</div>
              <div class="k">入場</div><div class="v" id="entrance">—</div>
            </div>
            <div class="note">※「同名で別案」は、同じ名前でも別の候補を出すための“揺らし”です（SNS向け）。</div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <div class="toast" id="toast">コピーしました</div>

  <script type="module">
    // 1日1アプリ: 動的アセット用（今回未使用だがルールとして常に入れる）
    const asset = (p) => new URL(p, import.meta.url).toString();

    // ----------------------------
    // seeded RNG (name -> stable)
    // ----------------------------
    const fnv1a = (str) => {
      // 32-bit FNV-1a
      let h = 0x811c9dc5;
      for (let i = 0; i < str.length; i++) {
        h ^= str.charCodeAt(i);
        h = Math.imul(h, 0x01000193);
      }
      return h >>> 0;
    };

    const mulberry32 = (a) => () => {
      let t = a += 0x6D2B79F5;
      t = Math.imul(t ^ (t >>> 15), t | 1);
      t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
      return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
    };

    const pick = (rng, arr) => arr[Math.floor(rng() * arr.length)];

    const pad2 = (n) => String(n).padStart(2, "0");

    // ----------------------------
    // Dictionaries
    // ----------------------------
    const epithetA = [
      "漆黒","蒼","紅蓮","銀河","極東","地下","電脳","暴走","無敗","無音",
      "猛毒","鋼鉄","怪力","妖艶","残響","狂騒","真昼","深夜","暴風","雷鳴"
    ];
    const epithetB = [
      "の放浪者","の支配者","の異端児","の狩人","の闘将","の破壊神","の修羅","の伝説","の来訪者","の終端",
      "のカリスマ","の切り札","の番人","の疾風","の狂犬","の天才","の怪物","の求道者","の化身","の亡霊"
    ];

    const ringCore = [
      "バッファロー","コブラ","タイガー","レイザー","ハリケーン","バースト","クルセイダー","ヴァンダル","グラディエーター","ジャガーノート",
      "ノマド","アウトロー","ファントム","エクリプス","テンペスト","サイクロン","バイパー","マシン","ハンター","レジェンド"
    ];

    const suffix = [
      "・X","・改","・零式","・二代目","・EX","・Z","・Mk-II","・極","・NEO","・Ω"
    ];

    const catchA = [
      "リングに立つ理由はひとつ","拍手より悲鳴が似合う","勝つまで終わらない","逃げ道を塞いでから殴る","静かに壊す",
      "正義も悪も、俺が決める","限界を見に来た","泣くのは後","熱量でねじ伏せる","今日は“勝利”を回収しに来た"
    ];
    const catchB = [
      "最後に立っているのは誰だ？","証明してみろ","その目で確認しろ","覚悟はできてるか","ここからが本番だ",
      "全部、飲み込む","今夜、伝説が更新される","静粛に。処刑の時間だ","拍手は要らない","では、始めよう"
    ];

    const finisherNoun = [
      "ドライバー","ボム","バスター","スープレックス","クラッシャー","スパイク","ラリアット","キック","アームロック","ネックブリーカー",
      "パイルドライバー","スラム","チョーク","ロック","クラッチ","シューター","バレット","カッター","カノン","ストンプ"
    ];
    const finisherMod = [
      "インフェルノ","デッドリー","ゼロ距離","真空","断罪","深海","皆既","逆襲","迅雷","地獄",
      "月光","獣","極","絶対","超","禁断","最終","臨界","暗黒","白夜"
    ];

    const styles = [
      "パワー型（押し切り）","テクニカル（関節の職人）","ストライカー（蹴り多め）","スピード型（ヒット＆アウェイ）","ラフファイト（反則ギリギリ）",
      "カウンター型（待って殺す）","オールラウンダー（何でもやる）","ショーマン型（魅せて潰す）","サブミッション特化（締め落とす）","変則型（読めない）"
    ];

    const entrances = [
      "照明が落ち、低音だけが残る。遅れて歓声が追いつく。",
      "花道の途中で立ち止まり、観客席を一睨みしてから進む。",
      "リングイン直前に不敵な笑み。拍手がざわめきに変わる。",
      "入場曲の“サビ”でポーズ。会場が一段うるさくなる。",
      "無言で歩く。視線だけで空気を支配する。",
      "コーナーに登り、指を一本立てる。合図はそれだけ。",
      "足音がやけに大きい。近づくほど静かになる。",
      "ロープをまたぐ瞬間、表情が変わる。スイッチが入る。"
    ];

    // ----------------------------
    // Generator
    // ----------------------------
    function makeProfile(name, jitter = 0) {
      const base = fnv1a(name.trim().toLowerCase() || "noname");
      const seed = (base ^ (jitter * 0x9e3779b9)) >>> 0;
      const rng = mulberry32(seed);

      // リングネーム構成：二系統を混ぜる
      const useJP = rng() < 0.52;

      let ringName;
      if (useJP) {
        // 「漆黒の〜」系
        const a = pick(rng, epithetA);
        const b = pick(rng, epithetB);
        const core = pick(rng, ringCore);
        const add = rng() < 0.35 ? pick(rng, suffix) : "";
        // 入力名を少し残す（強制はしない）
        const hint = name.trim() ? `《${name.trim()}》` : "";
        ringName = `${a}${b} ${core}${add}${hint ? " " + hint : ""}`;
      } else {
        // カタカナ英語系
        const core = pick(rng, ringCore);
        const add = pick(rng, suffix);
        const tag = name.trim() ? name.trim() : "NO NAME";
        // 例: "PHANTOM X - MATSUMURA"
        ringName = `${core}${add} - ${tag.toUpperCase()}`;
      }

      const catchphrase = `${pick(rng, catchA)}。${pick(rng, catchB)}。`;

      const finisher = `${pick(rng, finisherMod)}・${pick(rng, finisherNoun)}`;

      const style = pick(rng, styles);
      const entrance = pick(rng, entrances);

      return { seed, ringName, catchphrase, finisher, style, entrance };
    }

    // ----------------------------
    // UI
    // ----------------------------
    const $ = (id) => document.getElementById(id);

    const nameInput = $("nameInput");
    const genBtn = $("genBtn");
    const shuffleBtn = $("shuffleBtn");
    const copyBtn = $("copyBtn");
    const shareBtn = $("shareBtn");
    const resetBtn = $("resetBtn");

    const seedBadge = $("seedBadge");
    const stamp = $("stamp");
    const ringNameEl = $("ringName");
    const catchEl = $("catch");
    const finisherEl = $("finisher");
    const styleEl = $("style");
    const entranceEl = $("entrance");
    const toast = $("toast");

    let jitter = 0;
    let lastProfile = null;

    const showToast = (msg) => {
      toast.textContent = msg;
      toast.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toast.classList.remove("show"), 1100);
    };

    const nowStamp = () => {
      const d = new Date();
      return `${d.getFullYear()}/${pad2(d.getMonth()+1)}/${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
    };

    const render = (profile) => {
      lastProfile = profile;
      seedBadge.textContent = `seed: ${profile.seed}`;
      stamp.textContent = `生成時刻：${nowStamp()}`;

      ringNameEl.textContent = profile.ringName;
      catchEl.textContent = profile.catchphrase;
      finisherEl.textContent = profile.finisher;
      styleEl.textContent = profile.style;
      entranceEl.textContent = profile.entrance;
    };

    const buildShareText = () => {
      if (!lastProfile) return "";
      const n = nameInput.value.trim() || "（無名）";
      return [
        `【リングネームメーカー】`,
        `元の名前：${n}`,
        `リングネーム：${lastProfile.ringName}`,
        `キャッチ：${lastProfile.catchphrase}`,
        `得意技：${lastProfile.finisher}`,
        `属性：${lastProfile.style}`,
      ].join("\n");
    };

    const generate = () => {
      const name = nameInput.value || "";
      const p = makeProfile(name, jitter);
      render(p);
    };

    genBtn.addEventListener("click", () => {
      jitter = 0;
      generate();
    });

    shuffleBtn.addEventListener("click", () => {
      // 同名で別案：jitterを進める
      jitter++;
      generate();
    });

    copyBtn.addEventListener("click", async () => {
      const text = buildShareText();
      if (!text) return;
      try{
        await navigator.clipboard.writeText(text);
        showToast("コピーしました");
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        showToast("コピーしました");
      }
    });

    shareBtn.addEventListener("click", async () => {
      const text = buildShareText();
      if (!text) return;
      if (navigator.share) {
        try{
          await navigator.share({ text, title: "リングネームメーカー" });
        }catch(e){
          // user cancelled etc.
        }
      } else {
        // shareが無い環境はコピーへ誘導
        try{
          await navigator.clipboard.writeText(text);
          showToast("共有不可→コピーしました");
        }catch{
          showToast("共有不可");
        }
      }
    });

    resetBtn.addEventListener("click", () => {
      nameInput.value = "";
      jitter = 0;
      lastProfile = null;
      seedBadge.textContent = "seed: -";
      stamp.textContent = "—";
      ringNameEl.textContent = "—";
      catchEl.textContent = "—";
      finisherEl.textContent = "—";
      styleEl.textContent = "—";
      entranceEl.textContent = "—";
      nameInput.focus();
    });

    // Enterで生成
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        jitter = 0;
        generate();
      }
    });

    // 初期表示（例のままだと生成できないので空）
    nameInput.focus();
  </script>
</body>
</html>
