<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
<title>å›è»¢æ¾æ‘å¯¿å¸- 1æ—¥1ã‚¢ãƒ—ãƒª / 2025-11-01</title>
<style>
  :root{
    --bg:#0b1014; --ink:#e9f1f7; --muted:#98a8b8; --acc:#ffd36e; --danger:#ff6b7a; --ok:#8ae6a2;
    --rail:#202833; --shadow:0 10px 30px rgba(0,0,0,.35);
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --vh: 1vh;

    /* ç«¯æœ«å·®ã‚’å¸åã™ã‚‹ãŸã‚ã®â€œå®Ÿå¯¸pxâ€å¤‰æ•°ï¼ˆJSã§ä¸Šæ›¸ãï¼‰ */
    --gap-px: 24px;          /* ãƒã‚¿â†‘/ã‚·ãƒ£ãƒªâ†“ ã®éš™é–“é‡ */
    --open-px: 120px;        /* é–‹ã„ãŸã¨ãã®ãƒã‚¿ã®æŒã¡ä¸Šã’é‡ */
    --matsu-bottom-px: 60px; /* æ¾æ‘ã®è¶³å…ƒã®ä½ç½®ï¼ˆã‚·ãƒ£ãƒªä¸Šã‹ã‚‰ã®è·é›¢ï¼‰ */
  }
  *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent }
  html,body{ height:100%; margin:0 }
  body{
    background:#060a11; color:var(--ink);
    font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",sans-serif;
    overflow:hidden; user-select:none; touch-action:manipulation;
    overscroll-behavior: none;
  }
  #app{
    position:fixed; inset:0; display:grid; grid-template-rows:auto 1fr auto;
    height: 100dvh; height: calc(var(--vh) * 100);
  }

  header{ padding:calc(10px + var(--safe-top)) 14px 10px; display:flex; align-items:center; justify-content:space-between; gap:10px }
  .ttl{ font-weight:800; letter-spacing:.02em }
  .pill{ font-size:12px; color:var(--muted); background:#0f1623aa; border:1px solid #24364a; padding:8px 10px; border-radius:999px; box-shadow:var(--shadow) }
  .pill b{ color:var(--ink) }

  /* ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆ9:16å›ºå®šã§PC/SPåŒç”»è§’ï¼‰ */
  .stage{
    position:relative;
    height:100%;
    aspect-ratio: 9 / 16;
    margin: 0 auto;
    max-width: min(100vw, calc(100dvh * 9 / 16));
    background: linear-gradient(180deg, #0c141f 0%, #0a1019 55%, #0a0e14 56%, #05080d 100%);
    overflow:hidden;
  }
  .wall{
    position:absolute; left:0; right:0; top:0; height:54%;
    background:
      radial-gradient(1200px 600px at 70% -20%, #132032 0%, transparent 60%),
      linear-gradient(180deg,#0f1a2b 0%, #0c1523 100%);
    opacity:.9;
  }
  .belt{
    position:absolute; left:0; right:0; top:54%; height:22%;
    background: linear-gradient(180deg,#1a212d 0%, #0f151d 100%);
    border-top:2px solid #2a3546; border-bottom:2px solid #0a0f16;
    box-shadow: inset 0 8px 18px rgba(0,0,0,.35), inset 0 -10px 20px rgba(0,0,0,.4);
    overflow:visible;
  }
  .belt::after{
    content:""; position:absolute; inset:-6px; opacity:.3; pointer-events:none;
    background: repeating-linear-gradient(90deg, #ffffff1c 0 3px, transparent 3px 60px);
    animation: tread 2.4s linear infinite;
  }
  @keyframes tread { from{ transform:translateX(0) } to{ transform:translateX(-60px) } }

  .floor{
    position:absolute; left:0; right:0; bottom:0; top:76%;
    background: linear-gradient(180deg, #0a0e14 0%, #080b10 45%, #05080d 100%);
  }

  /* HUD */
  .hud{ position:absolute; inset:0; display:flex; flex-direction:column; justify-content:space-between; pointer-events:none; padding:10px 12px }
  .bar{ display:flex; gap:8px; align-items:center; justify-content:space-between }
  .chip{ pointer-events:auto; background:#0f1623cc; border:1px solid #22364a; padding:8px 10px; border-radius:10px; color:#dbe7f4; box-shadow:var(--shadow); font-size:13px; min-width:80px; text-align:center }
  .good{ color:#dbffe7; border-color:#1f3827; background:#0f1a14cc }
  .bad{  color:#ffd2d7; border-color:#3a1b26; background:#1a0f14cc }

  /* ã®ã‚Œã‚“é¢¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
  .noren{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; opacity:0; transform:translateY(-20px); transition:opacity .35s ease, transform .35s ease }
  .noren.show{ opacity:1; transform:translateY(0) }
  .noren .card{ padding:16px 20px; border-radius:12px; background:#0f1623cc; border:1px solid #22364a; box-shadow:var(--shadow); font-weight:700; letter-spacing:.06em }

  /* å¯¿å¸ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆãƒ™ãƒ«ãƒˆå†…ã«å¯¾ã—ã¦çµ¶å¯¾é…ç½®ï¼‰ */
  .item{
    position:absolute; left:0; top:50%;
    transform: translateY(-50%) translateX(0);
    width:68%;              /* ã‚¹ãƒ†ãƒ¼ã‚¸æ¯”ï¼šæ¨ªã‚µã‚¤ã‚º */
    height:84%;             /* ãƒ™ãƒ«ãƒˆé«˜ã«å¯¾ã™ã‚‹ç¸¦ã‚µã‚¤ã‚º */
    display:block; border:none; background:transparent; padding:0; cursor:pointer;
    filter: drop-shadow(0 12px 10px rgba(0,0,0,.45));
    will-change: transform;
  }
  .sushi{ position:absolute; inset:0; background:#0000; overflow:visible; }
  .sushi img{ width:100%; height:100%; object-fit:contain; display:block }

  /* ã‚µãƒ³ãƒ‰å¯¿å¸ï¼ˆpxãƒ™ãƒ¼ã‚¹ã§å®‰å®šã•ã›ã‚‹ï¼‰ */
  .sando .neta, .sando .shari, .sando .core{
    position:absolute; left:0; right:0; margin:auto; width:100%; height:100%; display:block;
    transition: transform .22s cubic-bezier(.2,.8,.2,1), opacity .18s ease, filter .18s ease;
    will-change: transform, opacity, filter;
  }
  /* å¹³å¸¸æ™‚ï¼šãƒã‚¿ã¯ä¸Šã¸ã€ã‚·ãƒ£ãƒªã¯ä¸‹ã¸ï¼ˆâ€œéš™é–“â€ã‚’ px ã§ä¸€å®šåŒ–ï¼‰ */
  .sando .neta{  transform: translateY(calc(-1 * var(--gap-px))); z-index:3; }
  .sando .shari{ transform: translateY(var(--gap-px));            z-index:1; }

  /* æ¾æ‘ã¯ã‚·ãƒ£ãƒªã®ä¸Šã«â€œç«‹ã¤â€ä½ç½®ã‚’ px ã§å›ºå®š */
  .sando .core{ pointer-events:none; opacity:0; z-index:2; }
  .sando .core img{
    position:absolute; left:50%; transform:translateX(-50%);
    width:34%;
    bottom: var(--matsu-bottom-px);
  }

  /* é–‹ã„ãŸæ™‚ï¼šãƒã‚¿ã ã‘å¤§ããä¸Šã’ã‚‹ï¼ˆpxã§ä¸€å®šï¼‰ */
  .sando.open .neta{  transform: translateY(calc(-1 * var(--open-px))) rotate(-8deg); }
  .sando.open .shari{ transform: translateY(var(--gap-px)) rotate(0); }
  .sando.open .core { opacity:1; filter: drop-shadow(0 0 20px rgba(255,211,110,.35)) }

  /* æ“ä½œåŸŸ */
  .controls{
    position:fixed; left:0; right:0; bottom:0; padding:10px 12px calc(14px + var(--safe-bottom));
    display:grid; grid-template-columns: 1fr auto 1fr; gap:10px; align-items:center;
    background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,.35) 25%, rgba(0,0,0,.65) 100%);
    backdrop-filter: blur(6px);
  }
  .btn{ appearance:none; border:none; cursor:pointer; font:inherit; background:#101827; color:#e9f1f7; border:1px solid #2236; border-radius:12px; padding:14px 18px; box-shadow:var(--shadow) }
  .btn.big{ font-weight:700 } .btn:active{ transform:translateY(1px) }

  /* çµæœãƒ¢ãƒ¼ãƒ€ãƒ« */
  .modal{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.55); opacity:0; pointer-events:none; transition:opacity .25s }
  .modal.show{ opacity:1; pointer-events:auto }
  .panel{ width:min(92vw,520px); background:#0f1623; border:1px solid #2236; border-radius:16px; padding:18px; box-shadow:var(--shadow); text-align:center }
  .panel h2{ margin:6px 0 12px } .panel p{ margin:0 0 12px; color:var(--muted) }
  .score{ font-size:40px; font-weight:800; margin:8px 0 2px }
  .row{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:10px }
</style>
</head>
<body>
<div id="app">
  <header>
    <div class="ttl">å›è»¢æ¾æ‘å¯¿å¸</div>
    <div class="pill">11/1 ã¯ <b>ã™ã—ã®æ—¥</b></div>
  </header>

  <main class="stage" id="stage" aria-label="ã‚²ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼ã‚¸">
    <div class="wall"></div>
    <div class="belt" id="belt"></div>
    <div class="floor"></div>

    <div class="noren" id="noren"><div class="card">ã®ã‚Œã‚“ã‚’ä¸Šã’ã¦ã„ã¾ã™â€¦ã€Œå–¶æ¥­ä¸­ï¼ã€</div></div>

    <!-- HUD -->
    <div class="hud">
      <div class="bar">
        <div class="chip good" id="scoreChip">æ¾æ‘ï¼š0çš¿</div>
        <div class="chip" id="timeChip">60s</div>
        <div class="chip bad" id="missChip">ãƒŸã‚¹ï¼š0/3</div>
      </div>
      <div class="bar" style="justify-content:center">
        <div class="chip" id="speedChip">é€Ÿåº¦ï¼š1.0x</div>
      </div>
    </div>
  </main>

  <div class="controls">
    <button class="btn" id="howBtn" type="button">éŠã³æ–¹</button>
    <button class="btn big" id="startBtn" type="button">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    <button class="btn" id="muteBtn" type="button" aria-pressed="false">ğŸ”Š</button>
  </div>
</div>

<!-- çµæœ -->
<div class="modal" id="resultModal" role="dialog" aria-modal="true" aria-labelledby="resTtl">
  <div class="panel">
    <h2 id="resTtl">çµæœ</h2>
    <div class="score" id="finalScore">0 çš¿</div>
    <p id="finalMsg">ãƒ‘ã‚«ãƒƒã¨æ¾æ‘ã€è¦‹æ¥µã‚æˆåŠŸï¼</p>
    <div class="row">
      <button class="btn big" id="retryBtn" type="button">ã‚‚ã†ä¸€åº¦</button>
      <button class="btn" id="shareBtn" type="button">çµæœã‚’Xã§ã‚·ã‚§ã‚¢</button>
    </div>
  </div>
</div>

<script type="module">
  // å‹•çš„ã‚¢ã‚»ãƒƒãƒˆè§£æ±ºï¼ˆVercel/ãƒ­ãƒ¼ã‚«ãƒ«ä¸¡å¯¾å¿œï¼‰
  const asset = (fileName) => {
    try{
      const p = location.pathname;
      // /YYYY-MM-DD ã¾ãŸã¯ /YYYY-MM-DD/... ã®å…ˆé ­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŠ½å‡º
      const m = p.match(/^\/(\d{4}-\d{2}-\d{2})(?:\/.*)?$/);
      const base = m ? `/${m[1]}` : '';
      return `${base}/assets/${fileName.replace(/^\/+/, '').replace(/^\.\/assets\//, '')}`;
    }catch(e){
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆç›¸å¯¾ï¼‰
      return `assets/${fileName.replace(/^\/+/, '').replace(/^\.\/assets\//, '')}`;
    }
  };

  // DOM
  const stage = document.getElementById("stage");
  const belt  = document.getElementById("belt");
  const beltW = () => belt.offsetWidth;

  const scoreChip = document.getElementById("scoreChip");
  const timeChip  = document.getElementById("timeChip");
  const missChip  = document.getElementById("missChip");
  const speedChip = document.getElementById("speedChip");
  const startBtn  = document.getElementById("startBtn");
  const retryBtn  = document.getElementById("retryBtn");
  const howBtn    = document.getElementById("howBtn");
  const muteBtn   = document.getElementById("muteBtn");
  const shareBtn  = document.getElementById("shareBtn");
  const noren     = document.getElementById("noren");
  const modal     = document.getElementById("resultModal");
  const finalScore= document.getElementById("finalScore");
  const finalMsg  = document.getElementById("finalMsg");

  // ç”»åƒ
  const SUSHI_SIDE = [
    "./assets/sushi_salmon_side.png",
    "./assets/sushi_tuna_side.png",
    "./assets/sushi_egg_side.png",
    "./assets/sushi_shrimp_side.png",
    "./assets/sushi_kappa_side.png",
    "./assets/sushi_ikura_side.png",
  ].map(asset);
  const NETA_SIDE  = asset("./assets/neta_side.png");
  const SHARI_SIDE = asset("./assets/shari_side.png");
  const MATSU_IMG  = asset("./assets/matsumura.png");

  // éŸ³
  const SE_OK   = new Audio(asset("./assets/se_ok.m4a"));
  const SE_NG   = new Audio(asset("./assets/se_ng.m4a"));
  const SE_UP   = new Audio(asset("./assets/se_speedup.m4a"));
  const VOICE_M = new Audio(asset("./assets/matsumura_desu.m4a"));
  const BGM     = new Audio(asset("./assets/bgm_loop.mp3"));
  BGM.loop = true; BGM.volume = 0.28;

  const SOUNDS = [SE_OK, SE_NG, SE_UP, VOICE_M, BGM];
  let muted=false;
  const applyMute=()=>{
    SOUNDS.forEach(a=>a.muted=muted);
    if(muted){ try{ BGM.pause(); }catch{} }
    else if(running){ BGM.play().catch(()=>{}); }
  };

  // çŠ¶æ…‹
  const GAME_TIME = 60, MAX_MISS = 3;
  let running=false, tRemain=GAME_TIME, score=0, miss=0;
  let speed=280, mult=1.0, spawnInt=0.85, lastSpawnAt=0, upIndex=0, prev=0, rafId=0;
  const SPEED_UP_S=[45,30,15];
  let items=[]; // {el,x,isSando,opened,openZoneL,openZoneR}
  const choice = (arr)=>arr[(Math.random()*arr.length)|0];

  // iOSãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ æŠ‘æ­¢
  let lastTouch=0;
  window.addEventListener("touchend",(e)=>{ const now=performance.now(); if(now-lastTouch<300){ e.preventDefault(); } lastTouch=now; },{passive:false});

  // 100vhè£œæ­£
  function setVh(){ document.documentElement.style.setProperty('--vh', `${window.innerHeight*0.01}px`); }
  setVh(); window.addEventListener('resize', setVh);

  // ãƒ™ãƒ«ãƒˆé«˜ã•ã«å¿œã˜ã¦â€œå®Ÿå¯¸pxâ€ã‚’ç®—å‡ºï¼ˆç«¯æœ«å·®ã‚’å¸åï¼‰
  function updateSandoVars(){
    const h = belt.offsetHeight || 200;        // ãƒ™ãƒ«ãƒˆé«˜ã•
    const gap  = h * 0.16;                     // éš™é–“ï¼š16%ï¼ˆå¥½ã¿ã§ 0.12ã€œ0.20ï¼‰
    const open = h * 0.86;                     // é–‹ãï¼š86%ï¼ˆã—ã£ã‹ã‚Šãƒ‘ã‚«ãƒƒï¼‰
    const matu = h * 0.26;                     // æ¾æ‘ã®è¶³å…ƒï¼š26%
    const root = document.documentElement.style;
    root.setProperty('--gap-px',  `${gap}px`);
    root.setProperty('--open-px', `${open}px`);
    root.setProperty('--matsu-bottom-px', `${matu}px`);
  }
  updateSandoVars();
  window.addEventListener('resize', updateSandoVars);

  // ã®ã‚Œã‚“/ãƒˆãƒ¼ã‚¹ãƒˆ
  function showNoren(msg="å–¶æ¥­ä¸­ï¼"){
    noren.firstElementChild.textContent=msg;
    noren.classList.add("show");
    setTimeout(()=>noren.classList.remove("show"),650);
  }
  function shake(el){
    el.animate(
      [{transform:'translateY(-50%) translateX(0)'},
       {transform:'translateY(-50%) translateX(-8px)'},
       {transform:'translateY(-50%) translateX(8px)'},
       {transform:'translateY(-50%) translateX(0)'}],
      {duration:180,iterations:1}
    );
  }
  function toast(text, good=true){
    const d=document.createElement("div");
    d.className="chip "+(good?"good":"bad");
    Object.assign(d.style,{position:"fixed",left:"50%",top:"20%",transform:"translate(-50%,-50%)",zIndex:9999});
    d.textContent=text; document.body.appendChild(d); setTimeout(()=>d.remove(),650);
  }

  // ç”Ÿæˆ
  function spawn(ts){
    const isSando = Math.random() < 0.35;
    let el = document.createElement("button");
    el.className = "item" + (isSando ? " sando" : "");
    el.type="button";
    el.setAttribute("aria-label", isSando ? "ã‚µãƒ³ãƒ‰å¯¿å¸ï¼ˆä¸­å¤®ã§ãƒ‘ã‚«ãƒƒã¨é–‹ãï¼‰" : "å¯¿å¸");

    el.innerHTML = isSando
      ? `<div class="sushi">
           <div class="neta"><img alt="" src="${NETA_SIDE}"></div>
           <div class="core"><img alt="" src="${MATSU_IMG}"></div>
           <div class="shari"><img alt="" src="${SHARI_SIDE}"></div>
         </div>`
      : `<div class="sushi"><img alt="" loading="lazy" src="${choice(SUSHI_SIDE)}"></div>`;

    el.addEventListener("click",()=>{
      if(!running) return;
      if(isSando){
        if(el.classList.contains("open")){ hitMatsu(); remove(el); }
        else { missOne(); shake(el); }
      }else{
        missOne(); shake(el);
      }
    });

    belt.appendChild(el);

    const x0  = beltW() + 60;     // å³å¤–ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆãƒ™ãƒ«ãƒˆå¹…åŸºæº–ï¼‰
    const cxL = beltW() * 0.38;   // ä¸­å¤®ã‚¾ãƒ¼ãƒ³
    const cxR = beltW() * 0.62;
    items.push({ el, x:x0, isSando, opened:false, openZoneL:cxL, openZoneR:cxR });
    lastSpawnAt = ts;
  }

  // ãƒ­ã‚¸ãƒƒã‚¯
  function hitMatsu(){
  score++;
  scoreChip.textContent=`æ¾æ‘ï¼š${score}çš¿`;
  if(!muted){
    try{
      VOICE_M.currentTime=0;
      VOICE_M.play();
    }catch{}
  }
  toast("æ¾æ‘ã‚²ãƒƒãƒˆï¼", true);
}
  function missOne(){ miss++; missChip.textContent=`ãƒŸã‚¹ï¼š${miss}/${MAX_MISS}`; if(!muted){ try{ SE_NG.currentTime=0; SE_NG.play(); }catch{} } toast("ãã‚Œã¯å¯¿å¸ï¼", false); if(miss>=MAX_MISS) endGame(); }
  function remove(el){ items = items.filter(it=>it.el!==el); el.remove(); }
  function speedUp(){ mult=Math.min(2.2, +(mult+0.4).toFixed(1)); speed*=1.22; spawnInt=Math.max(0.55, spawnInt-0.08); speedChip.textContent=`é€Ÿåº¦ï¼š${mult.toFixed(1)}x`; showNoren("æœ¬æ—¥ã®ãŠã™ã™ã‚ï¼ˆåŠ é€Ÿï¼‰"); if(!muted){ try{ SE_UP.currentTime=0; SE_UP.play(); }catch{} } }

  function loop(ts){
    rafId = requestAnimationFrame(loop);
    if(!prev) prev=ts;
    const dt=(ts-prev)/1000; prev=ts;
    if(!running) return;

    // æ™‚é–“
    tRemain -= dt; if(tRemain<0){ endGame(); return; }
    timeChip.textContent = `${Math.ceil(tRemain)}s`;

    // åŠ é€Ÿ
    if(upIndex<SPEED_UP_S.length && tRemain<=SPEED_UP_S[upIndex]){ speedUp(); upIndex++; }

    // ã‚¹ãƒãƒ¼ãƒ³
    if(ts-lastSpawnAt >= spawnInt*1000) spawn(ts);

    // ç§»å‹•ï¼†é–‹é–‰
    const dx = speed*dt;
    for(let i=items.length-1;i>=0;i--){
      const it=items[i];
      it.x -= dx;
      it.el.style.transform = `translateY(-50%) translateX(${it.x}px)`;

      if(it.isSando && !it.opened){
        const mid = it.x + it.el.offsetWidth/2;
        if(mid < it.openZoneR && mid > it.openZoneL){
          it.opened = true;
          it.el.classList.add("open");
          const openMs = 1400;
          setTimeout(()=>{ if(it.el.isConnected){ it.el.classList.remove("open"); } }, openMs);
        }
      }

      // ç”»é¢å¤–ï¼ˆå–ã‚Šé€ƒã—ã¯ãƒãƒ¼ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
      if(it.x < - (it.el.offsetWidth + 40)){ remove(it.el); }
    }
  }

  function resetGame(){
    running=false; cancelAnimationFrame(rafId); prev=0;
    tRemain=GAME_TIME; score=0; miss=0; upIndex=0;
    speed=280; mult=1.0; spawnInt=0.85;
    scoreChip.textContent=`æ¾æ‘ï¼š0çš¿`; missChip.textContent=`ãƒŸã‚¹ï¼š0/${MAX_MISS}`;
    timeChip.textContent=`${GAME_TIME}s`; speedChip.textContent=`é€Ÿåº¦ï¼š${mult.toFixed(1)}x`;
    items.forEach(it=>it.el.remove()); items.length=0;
    updateSandoVars();                   // â† ã“ã“ã§æ¯å›å®Ÿå¯¸ã‚’å†è¨ˆç®—
    showNoren("ã®ã‚Œã‚“ã‚’ä¸Šã’ã¦ã„ã¾ã™â€¦ã€Œå–¶æ¥­ä¸­ï¼ã€");
  }
  function startGame(){
    resetGame(); running=true;
    if(!muted){ BGM.currentTime=0; BGM.play().catch(()=>{}); }
    requestAnimationFrame(loop);
  }
  function endGame(){
    running=false; cancelAnimationFrame(rafId);
    try{ BGM.pause(); }catch{}
    finalScore.textContent = `${score} çš¿`;
    finalMsg.textContent = miss>=MAX_MISS ? "ãƒŸã‚¹å¤šã‚â€¦ã¾ãŸã®æŒ‘æˆ¦ã‚’ï¼" : "é–‰åº—ã§ã™ã€‚ãŠã¤ã‹ã‚Œã•ã¾ï¼";
    modal.classList.add("show");
  }

  // UI
  startBtn.addEventListener("click",()=>{ modal.classList.remove("show"); startGame(); });
  retryBtn.addEventListener("click",()=>{ modal.classList.remove("show"); startGame(); });
  howBtn.addEventListener("click",()=>{ alert("ãƒ«ãƒ¼ãƒ«\nãƒ»å¯¿å¸ãŒå·¦ã¸æµã‚Œã¾ã™\nãƒ»ã‚µãƒ³ãƒ‰å¯¿å¸ã¯ä¸­å¤®ã§ä¸€åº¦ã ã‘ãƒ‘ã‚«ãƒƒã¨é–‹ãï¼\nãƒ»é–‹ã„ã¦ã„ã‚‹é–“ã«ã‚¿ãƒƒãƒ—ã§æ¾æ‘ã‚²ãƒƒãƒˆ\nãƒ»é€šå¸¸å¯¿å¸ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ãƒŸã‚¹\nãƒ»ã‚µãƒ³ãƒ‰å¯¿å¸ã®å–ã‚Šé€ƒã—ã¯ãƒŸã‚¹ã«ãªã‚Šã¾ã›ã‚“\nãƒ»60ç§’ or ãƒŸã‚¹3å›ã§çµ‚äº†ã€‚é€”ä¸­ã§ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—"); });
  muteBtn.addEventListener("click",()=>{ muted=!muted; applyMute(); muteBtn.textContent=muted?"ğŸ”‡":"ğŸ”Š"; muteBtn.setAttribute("aria-pressed", String(!muted)); });
  shareBtn.addEventListener("click",()=>{ const text=`å›è»¢æ¾æ‘å¯¿å¸ï¼ˆæ¨ªãƒªã‚¢ãƒ«ï¼‰ï¼š${score}çš¿ã‚²ãƒƒãƒˆï¼ #1æ—¥1ã‚¢ãƒ—ãƒª #å›è»¢å¯¿å¸`; const url=location.href.split("?")[0]; const u=`https://x.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`; window.open(u,"_blank"); });

  // åˆæœŸè¡¨ç¤º
setVh(); // â† ã‚‚ã†å®šç¾©æ¸ˆã¿ã‚’ä½¿ã†ã ã‘ï¼
setTimeout(()=>showNoren("æº–å‚™ä¸­â†’å–¶æ¥­ä¸­ï¼"),200);
applyMute();

</script>
</body>
</html>
